<%- include('../layouts/header'); %>

<div class="container mt-5">
    <div class="card">
        <div class="card-header">
            <h1><%= title %></h1>
        </div>
        <div class="card-body">
            <form action="/admin/acta/create" method="POST">
                
                <!-- Datos del Usuario Receptor -->
                <fieldset class="mb-4">
                    <legend>1. Datos del Usuario Receptor</legend>
                    <div class="mb-3">
                        <label for="glpi_users_id" class="form-label">Usuario (Receptor)</label>
                        <select class="form-select" id="glpi_users_id" name="glpi_users_id" required>
                            <option value="" disabled selected>Seleccione un usuario...</option>
                            <% users.forEach(user => { %>
                                <option value="<%= user.id %>"><%= user.fullname %></option>
                            <% }); %>
                        </select>
                    </div>
                </fieldset>

                <!-- Equipos Asignados -->
                <fieldset class="mb-4">
                    <legend>2. Equipos Asignados</legend>
                    <div class="row">
                        <div class="col-md-5">
                            <label for="tipoEquipo" class="form-label">Tipo de Equipo</label>
                            <select id="tipoEquipo" class="form-select">
                                <option value="" disabled selected>Seleccione un tipo...</option>
                                <% tiposDeEquipo.forEach(tipo => { %>
                                    <option value="<%= tipo %>"><%= tipo.replace(/([A-Z])/g, ' $1').trim() %></option>
                                <% }); %>
                            </select>
                        </div>
                        <div class="col-md-5">
                            <label for="listaEquipos" class="form-label">Equipos Disponibles</label>
                            <select id="listaEquipos" class="form-select" disabled>
                                <option>Seleccione un tipo primero</option>
                            </select>
                        </div>
                        <div class="col-md-2 d-flex align-items-end">
                            <button type="button" id="btnAgregarEquipo" class="btn btn-success w-100" disabled>Agregar</button>
                        </div>
                    </div>
                    <div class="mt-3">
                        <h5>Equipos en el Acta</h5>
                        <ul id="equiposAgregados" class="list-group">
                            <li class="list-group-item text-muted">No se han agregado equipos.</li>
                        </ul>
                    </div>
                </fieldset>

                <!-- Observaciones -->
                <fieldset class="mb-4">
                    <legend>3. Observaciones</legend>
                    <div class="mb-3">
                        <textarea class="form-control" id="observaciones" name="observaciones" rows="3"></textarea>
                    </div>
                </fieldset>

                <!-- Datos de Entrega -->
                <fieldset class="mb-4">
                    <legend>4. Datos de Entrega</legend>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="entregado_por_nombre" class="form-label">Entregado por (Nombre y Apellido)</label>
                            <input type="text" class="form-control" id="entregado_por_nombre" name="entregado_por_nombre" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="entregado_por_cargo" class="form-label">Cargo</label>
                            <input type="text" class="form-control" id="entregado_por_cargo" name="entregado_por_cargo" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="entregado_por_cedula" class="form-label">Cédula</label>
                            <input type="text" class="form-control" id="entregado_por_cedula" name="entregado_por_cedula" required>
                        </div>
                    </div>
                    <!-- Aquí iría el componente para la firma digital -->
                </fieldset>

                <!-- Responsabilidades -->
                <fieldset class="mb-4">
                    <legend>5. Responsabilidades del Usuario</legend>
                    <div class="form-control" style="height: 150px; overflow-y: auto; background-color: #e9ecef;">
                        <small><%- responsabilidades.replace(/\n/g, '<br>') %></small>
                    </div>
                </fieldset>

                <div class="d-grid">
                    <button type="submit" class="btn btn-primary btn-lg">Generar Acta</button>
                </div>
            </form>
        </div>
    </div>
</div>

<%- include('../layouts/footer'); %>